"""
Главный модуль агентной системы Orai.

Инициализирует и запускает агентный поток на базе PocketFlow
для обработки запросов пользователя через цепочку узлов.
"""

from flow import create_agent_flow


def main():
    """
    Основная функция для запуска агентной системы Orai.

    Создаёт экземпляр агентного потока и запускает его
    с инициализированным общим хранилищем (shared store).
    """
    print("="*60)
    print("Добро пожаловать в агентную систему Orai!")
    print("Powered by PocketFlow - минималистичный LLM-фреймворк")
    print("="*60)
    print()

    # Создаём агентный поток
    flow = create_agent_flow()

    # Инициализируем общее хранилище (shared store)
    # Это словарь, который будет использоваться узлами для обмена данными
    shared = {}

    try:
        # Запускаем поток с общим хранилищем
        flow.run(shared)

        print("\n" + "="*60)
        print("Работа агентной системы завершена.")
        print("="*60)

    except KeyboardInterrupt:
        print("\n\nПрограмма прервана пользователем.")
    except Exception as e:
        print(f"\n\nПроизошла ошибка: {e}")
        print("Подробности ошибки можно найти в логах.")


if __name__ == "__main__":
    main()
